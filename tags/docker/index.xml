<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Docker on Jamie&#39;s Blog</title>
    <link>http://akjamie.github.io/tags/docker/</link>
    <description>Recent content in Docker on Jamie&#39;s Blog</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 23 Jul 2019 13:36:10 +0000</lastBuildDate>
    <atom:link href="http://akjamie.github.io/tags/docker/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Spring Cloud Series</title>
      <link>http://akjamie.github.io/post/2019-07-15-spring-cloud-demo-overview/</link>
      <pubDate>Tue, 23 Jul 2019 13:36:10 +0000</pubDate>
      <guid>http://akjamie.github.io/post/2019-07-15-spring-cloud-demo-overview/</guid>
      <description>&lt;h1 id=&#34;demo的介绍&#34;&gt;Demo的介绍&lt;/h1&gt;&#xA;&lt;p&gt;本文主要通过一个小demo，来综合运用spring cloud系列技术，demo中主要包含如下模块/组建：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Authorization service, 基于Spring Security Oauth2 + Spring Cloud Oauth2,提供集中授权服务,如Token 生成,校验等&lt;/li&gt;&#xA;&lt;li&gt;API gateway, edge service, 提供统一的对外访问接口，集成了oauth2 安全校验，Netflix Hystrix服务降级，依赖隔离，断路保护功能&lt;/li&gt;&#xA;&lt;li&gt;Service registry,基于Netflix Eureka的注册中心提供服务注册和服务发现功能&lt;/li&gt;&#xA;&lt;li&gt;Config service, 采用了 Spring cloud config + Spring Cloud Bus提供简单的配置中心&lt;/li&gt;&#xA;&lt;li&gt;Catalog service, 示例服务，模拟一个简单的商品服务目录，仅一维结构&lt;/li&gt;&#xA;&lt;li&gt;Inventory service, 示例服务, 模拟简单的商品库存服务&lt;/li&gt;&#xA;&lt;li&gt;Hystrix dashboard, 聚合hystrix的metrics监控展示&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h1 id=&#34;整体架构&#34;&gt;整体架构&lt;/h1&gt;&#xA;&lt;p&gt;&#xD;&#xA;  &lt;img src=&#34;http://akjamie.github.io/img/2019-07-15-spring-cloud-demo-overview/architecture.png&#34; alt=&#34;&#34;&gt;&#xD;&#xA;&#xD;&#xA;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Free CA Certs setup using Certbot &#43; Docker &#43; Nginx</title>
      <link>http://akjamie.github.io/2019/07/14/free-https-certs-docker-nginx/</link>
      <pubDate>Sun, 14 Jul 2019 18:30:05 +0000</pubDate>
      <guid>http://akjamie.github.io/2019/07/14/free-https-certs-docker-nginx/</guid>
      <description>&lt;h1 id=&#34;background&#34;&gt;Background&lt;/h1&gt;&#xA;&lt;p&gt;&lt;strong&gt;Let&amp;rsquo;s Encrypt&lt;/strong&gt; is a &lt;a href=&#34;https://en.wikipedia.org/wiki/Certificate_authority&#34; title=&#34;Certificate authority&#34;&gt;certificate authority&lt;/a&gt; that provides &lt;a href=&#34;https://en.wikipedia.org/wiki/X.509&#34; title=&#34;X.509&#34;&gt;X.509&lt;/a&gt; &lt;a href=&#34;https://en.wikipedia.org/wiki/Public_key_certificate&#34; title=&#34;Public key certificate&#34;&gt;certificates&lt;/a&gt; for &lt;a href=&#34;https://en.wikipedia.org/wiki/Transport_Layer_Security&#34; title=&#34;Transport Layer Security&#34;&gt;Transport Layer Security&lt;/a&gt; (TLS) encryption at no charge,The certificate is valid for 90 days, during which renewal can take place at anytime.&#xA;这样我们就可以用上免费的CA cert来安全expose我们自己的网站或者服务&lt;/p&gt;</description>
    </item>
    <item>
      <title>Harshicorp Vault Setup Config and integration with spring boot</title>
      <link>http://akjamie.github.io/2019/07/14/harshicorp-vault-setup-config/</link>
      <pubDate>Sun, 14 Jul 2019 12:10:27 +0000</pubDate>
      <guid>http://akjamie.github.io/2019/07/14/harshicorp-vault-setup-config/</guid>
      <description>&lt;h1 id=&#34;install-vault&#34;&gt;Install vault&lt;/h1&gt;&#xA;&lt;p&gt;Prepare &lt;em&gt;docker-compose.yml&lt;/em&gt;, content as below (just a sample here, please don&amp;rsquo;t use it for production, there are more aspects should be considered)&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;version: &amp;#39;3&amp;#39;&#xA;services:&#xA;  consul:&#xA;    container_name: consul.server&#xA;    command: agent -server -bind 0.0.0.0 -client 0.0.0.0 -bootstrap-expect=1&#xA;    image: consul:latest&#xA;    restart: always&#xA;    volumes:&#xA;      - ./consul.server/config:/consul/config&#xA;      - ./consul.server/data:/consul/data&#xA;    ports:&#xA;      - &amp;#34;9300:9300&amp;#34;&#xA;      - &amp;#34;9500:9500&amp;#34;&#xA;      - &amp;#34;9600:9600/udp&amp;#34;&#xA;  vault:&#xA;    container_name: vault.server&#xA;    image: vault&#xA;    ports:&#xA;    - &amp;#34;8200:8200&amp;#34;&#xA;    restart: always&#xA;    links:&#xA;        - consul:consul.server&#xA;    volumes:&#xA;    - ./vault.server/config:/mnt/vault/config&#xA;    - ./vault.server/data:/mnt/vault/data&#xA;    - ./vault.server/logs:/mnt/vault/logs&#xA;    - ./vault.server/config:/vault/config&#xA;    - /etc/letsencrypt:/etc/letsencrypt&#xA;    cap_add:&#xA;    - IPC_LOCK&#xA;    command: server&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;consul-config---configjson&#34;&gt;consul config - config.json&lt;/h2&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;   {&#xA;     &amp;#34;datacenter&amp;#34;: &amp;#34;data-center-1&amp;#34;,&#xA;     &amp;#34;node_name&amp;#34;: &amp;#34;master-node&amp;#34;,&#xA;     &amp;#34;log_level&amp;#34;: &amp;#34;INFO&amp;#34;,&#xA;     &amp;#34;server&amp;#34;: true,&#xA;     &amp;#34;data_dir&amp;#34;: &amp;#34;/consul/data&amp;#34;,&#xA;     &amp;#34;ui&amp;#34; : true,&#xA;     &amp;#34;ports&amp;#34;: {&#xA;       &amp;#34;http&amp;#34;: 8500,&#xA;       &amp;#34;server&amp;#34;: 8300&#xA;     }&#xA;   } &#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;vault-config---vaulthcl&#34;&gt;vault config - vault.hcl&lt;/h2&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ui = true&#xA;backend &amp;#34;consul&amp;#34; {&#xA;  address = &amp;#34;consul:8500&amp;#34;&#xA;  advertise_addr = &amp;#34;http://consul:8300&amp;#34;&#xA;  scheme = &amp;#34;http&amp;#34;&#xA;}&#xA;listener &amp;#34;tcp&amp;#34; {&#xA;  address = &amp;#34;0.0.0.0:8200&#xA;  tls_disable = 1&#xA;}&#xA;disable_mlock = true&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;use-docker-compose-up--d-to-run-these-services-and-check-its-status&#34;&gt;Use docker-compose up -d to run these services, and check its status&lt;/h2&gt;&#xA;&lt;p&gt;&#xD;&#xA;  &lt;img src=&#34;http://akjamie.github.io/img/2019-07-14-harshicorp-vault-setup-config/15532408-351f3fa54f1ebc1a.png&#34; alt=&#34;&#34;&gt;&#xD;&#xA;&#xD;&#xA;&#xA;&#xD;&#xA;  &lt;img src=&#34;http://akjamie.github.io/img/2019-07-14-harshicorp-vault-setup-config/15532408-698c9ee3afd1d4f9.png&#34; alt=&#34;&#34;&gt;&#xD;&#xA;&#xD;&#xA;&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
